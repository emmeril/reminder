<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reminder App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.2.4/dist/cdn.min.js" defer></script>
</head>

<body x-data="reminderApp()" x-init="init()">

    <div class="container mt-4">
        <h2 class="mb-4">Reminder App</h2>

        <!-- Form to add new reminder -->
        <div class="card mb-4">
            <div class="card-body">
                <h4 class="card-title">Add New Reminder</h4>
                <form @submit.prevent="addReminder">
                    <div class="mb-3">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phoneNumber" x-model="newReminder.phoneNumber"
                            placeholder="Enter phone number" required>
                    </div>
                    <div class="mb-3">
                        <label for="paymentDate" class="form-label">Payment Date</label>
                        <input type="date" class="form-control" id="paymentDate" x-model="newReminder.paymentDate"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="reminderTime" class="form-label">Reminder Time</label>
                        <input type="time" class="form-control" id="reminderTime" x-model="newReminder.reminderTime"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Message</label>
                        <textarea class="form-control" id="message" x-model="newReminder.message" rows="3"
                            required></textarea>
                    </div>
                    <!-- <button type="submit" >Add Reminder</button> -->
                    <button type="submit" class="btn btn-primary" x-show="!isEditing">Add Remindert</button>
                    <button type="button" class="btn btn-primary" @click="updateReminder()" x-show="isEditing">Perbarui Pengingat</button>
                </form>
            </div>
        </div>

        <!-- Show QR Code if WhatsApp not logged in -->
        <!-- <div class="card mb-4" x-show="qrCode">
            <div class="card-body">
                <h4 class="card-title">Scan QR Code to Login to WhatsApp</h4>
                <img :src="qrCode" alt="QR Code" class="img-fluid">
            </div>
        </div> -->

        <!-- Display Reminders -->
        <div class="card mb-4">
            <div class="card-body">
                <h4 class="card-title">Reminders</h4>
                <ul class="list-group">
                    <template x-for="(reminder, index) in paginatedReminders" :key="reminder.id">
                        <li class="list-group-item">
                            <strong>Phone:</strong> <span x-text="reminder.phoneNumber"></span><br>
                            <strong>Date:</strong> <span
                                x-text="new Date(reminder.reminderDateTime).toLocaleString()"></span><br>
                            <strong>Message:</strong> <span x-text="reminder.message"></span>
                            <button class="btn btn-primary" @click="editReminder(reminder)">Edit</button>
                            <button class="btn btn-primary" @click="deleteReminder(reminder.id)">Hapus</button>
                        </li>
                    </template>
                </ul>

                <!-- Pagination for Reminders -->
                <nav aria-label="Page navigation">
                    <ul class="pagination mt-3">
                        <li class="page-item" :class="{ 'disabled': reminderPage === 1 }">
                            <a class="page-link" href="#" @click.prevent="prevReminderPage">Previous</a>
                        </li>
                        <li class="page-item" :class="{ 'disabled': reminderPage === totalReminderPages }">
                            <a class="page-link" href="#" @click.prevent="nextReminderPage">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <!-- Display Sent Reminders -->
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Sent Reminders</h4>
                <ul class="list-group">
                    <template x-for="(sentReminder, index) in paginatedSentReminders" :key="sentReminder.id">
                        <li class="list-group-item">
                            <strong>Phone:</strong> <span x-text="sentReminder.phoneNumber"></span><br>
                            <strong>Date:</strong> <span
                                x-text="new Date(sentReminder.reminderDateTime).toLocaleString()"></span><br>
                            <strong>Message:</strong> <span x-text="sentReminder.message"></span>
                        </li>
                    </template>
                </ul>

                <!-- Pagination for Sent Reminders -->
                <nav aria-label="Page navigation">
                    <ul class="pagination mt-3">
                        <li class="page-item" :class="{ 'disabled': sentReminderPage === 1 }">
                            <a class="page-link" href="#" @click.prevent="prevSentReminderPage">Previous</a>
                        </li>
                        <li class="page-item" :class="{ 'disabled': sentReminderPage === totalSentReminderPages }">
                            <a class="page-link" href="#" @click.prevent="nextSentReminderPage">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>


</body>

</html>